# UI Implementation

> **ÐÐ°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ:** [ðŸ  Ð“Ð»Ð°Ð²Ð½Ð°Ñ](README.md) | **Ð’Ñ‹ Ð·Ð´ÐµÑÑŒ: UI Implementation** | [apps/api/README.md â†’](apps/api/README.md)

Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ UI Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ backend Ð½Ð° FastAPI Ð¸ frontend Ð½Ð° Next.js Ð´Ð»Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ ÑÐµÐ¼Ð°Ð½Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼Ð¸ ÑÐµÑ‚ÑÐ¼Ð¸, ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð°Ð¼Ð¸, Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð°Ð¼Ð¸ Ð¸ Ñ„Ð¾Ñ€ÑÐ¸Ð½Ð³Ð¾Ð¼.

## ðŸ“– Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ
- [ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°](#Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°)
- [Ð—Ð°Ð¿ÑƒÑÐº](#Ð·Ð°Ð¿ÑƒÑÐº)
- [Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð±Ð»Ð¾ÐºÐ¸ UI](#Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ-Ð±Ð»Ð¾ÐºÐ¸-ui)
- [API-ÐºÐ¾Ð½Ñ‚ÑƒÑ€](#api-ÐºÐ¾Ð½Ñ‚ÑƒÑ€)
- [Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹](#ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹)
- [Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ](#Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ)
- [Troubleshooting](#troubleshooting)

## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

- `apps/api` â€” FastAPI API, Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ workspace-ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¹, auth, teacher-Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
- `apps/web` â€” Next.js ÐºÐ»Ð¸ÐµÐ½Ñ‚, Ð³Ñ€Ð°Ñ„Ð¾Ð²Ð°Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ, Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ñ‹ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹, Ñ„Ð¾Ñ€Ð¼ÑƒÐ», Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð¾Ð²
- `src/ctmsn` â€” Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÑ‡Ð½Ð¾Ðµ ÑÐ´Ñ€Ð¾ (ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸, Ð»Ð¾Ð³Ð¸ÐºÐ°, Ñ„Ð¾Ñ€ÑÐ¸Ð½Ð³)

## Ð—Ð°Ð¿ÑƒÑÐº

```bash
source venv/bin/activate
make install
make dev
```

ÐÐ´Ñ€ÐµÑÐ°:
- Web: `http://localhost:3000`
- API: `http://127.0.0.1:8000`

Ð Ð°Ð·Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº:

```bash
source venv/bin/activate
make dev-api
make dev-web
```

## Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð±Ð»Ð¾ÐºÐ¸ UI

### ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¸ Ñ€Ð¾Ð»Ð¸
- Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ/Ð²Ñ…Ð¾Ð´ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
- ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð°
- Ð Ð¾Ð»ÑŒ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ñ (`teacher`) Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð¾Ð¼ Ðº ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‡ÐµÑÐºÐ¸Ð¼ workspace

### Ð Ð°Ð±Ð¾Ñ‡Ð¸Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð°
- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸Ð· ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ñ Ð¸Ð»Ð¸ Â«Ñ‡Ð¸ÑÑ‚Ð¾Ð³Ð¾ Ð»Ð¸ÑÑ‚Ð°Â»
- ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ, Ð´ÑƒÐ±Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ, ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ
- Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚/Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚
- Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ (`undo/redo`)

### Ð ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ñ‹
- Ð“Ñ€Ð°Ñ„: ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ‚Ñ‹, Ð¿Ñ€ÐµÐ´Ð¸ÐºÐ°Ñ‚Ñ‹, Ñ„Ð°ÐºÑ‚Ñ‹
- Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ñ‹: CRUD Ð¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ
- ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ: CRUD Ð¸ Ð´Ð¾Ð¼ÐµÐ½Ñ‹
- ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ñ‹: CRUD, Ð°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ, ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ, highlights
- ÐŸÐ°Ð½ÐµÐ»ÑŒ forcing: `check`, `forces`, `force`

### Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
- Ð“Ñ€Ð°Ñ„ Ð½Ð° Cytoscape
- ÐŸÐ°Ð½ÐµÐ»Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°, Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹, Ñ„Ð¾Ñ€Ð¼ÑƒÐ», Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð¾Ð²
- Help panel Ð¸ teacher panel

## API-ÐºÐ¾Ð½Ñ‚ÑƒÑ€

ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ endpoint-Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹:

- `/api/auth/*` â€” Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ
- `/api/scenarios`, `/api/session/load`, `/api/run` â€” ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ Ð¸ Ð·Ð°Ð¿ÑƒÑÐº
- `/api/session/*` â€” Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÑÐµÑ‚Ð¸ Ð¸ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸
- `/api/workspaces*` â€” ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ workspace
- `/api/workspaces/{wid}/formulas*` â€” Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»
- `/api/workspaces/{wid}/variables*` â€” Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ…
- `/api/workspaces/{wid}/contexts*` â€” Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð¾Ð²
- `/api/workspaces/{wid}/forcing/*` â€” forcing API
- `/api/teacher/*` â€” teacher API

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹

```text
apps/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ src/ctmsn_api/
â”‚       â”œâ”€â”€ app.py
â”‚       â”œâ”€â”€ routes_auth.py
â”‚       â”œâ”€â”€ routes_editors.py
â”‚       â”œâ”€â”€ routes_teacher.py
â”‚       â”œâ”€â”€ sessions.py
â”‚       â”œâ”€â”€ registry.py
â”‚       â”œâ”€â”€ ops.py
â”‚       â””â”€â”€ serialize.py
â””â”€â”€ web/
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ login/page.tsx
    â”‚   â”œâ”€â”€ register/page.tsx
    â”‚   â”œâ”€â”€ workspaces/page.tsx
    â”‚   â”œâ”€â”€ workspace/[id]/page.tsx
    â”‚   â””â”€â”€ teacher/
    â”œâ”€â”€ components/
    â””â”€â”€ lib/
```

## Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

UI Ð¿Ð¾ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ e2e-Ð½Ð°Ð±Ð¾Ñ€Ð¾Ð¼:

```bash
source venv/bin/activate
make test-e2e
```

ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹:
- `tests/e2e_auth.py`
- `tests/e2e_workspace_mgmt.py`
- `tests/e2e_network_editor.py`
- `tests/e2e_forcing.py`
- `tests/e2e_editors.py`
- `tests/e2e_help_panel.py`
- `tests/e2e_teacher.py`

## Troubleshooting

### API Ð½Ðµ Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°ÐµÑ‚ÑÑ
- Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ `venv`
- Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ `make install-api`
- ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ñ€Ñ‚ `8000` ÑÐ²Ð¾Ð±Ð¾Ð´ÐµÐ½

### Web Ð½Ðµ Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°ÐµÑ‚ÑÑ
- Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ `make install-web`
- Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ `npm` Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
- ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ñ€Ñ‚ `3000` ÑÐ²Ð¾Ð±Ð¾Ð´ÐµÐ½

### UI Ð½Ðµ Ð²Ð¸Ð´Ð¸Ñ‚ API
- Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ `NEXT_PUBLIC_API_BASE` Ð² `apps/web/.env.local`
- Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ `GET /api/scenarios` Ð½Ð° `127.0.0.1:8000`

---

> **Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ:**
> - [README.md](README.md)
> - [apps/api/README.md](apps/api/README.md)
> - [apps/web/README.md](apps/web/README.md)
> - [USAGE.md](USAGE.md)
