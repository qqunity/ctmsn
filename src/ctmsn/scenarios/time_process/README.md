# –°—Ü–µ–Ω–∞—Ä–∏–π: –ü—Ä–æ—Ü–µ—Å—Å –≤–æ –≤—Ä–µ–º–µ–Ω–∏ (Time Process)

> **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** [üè† –ì–ª–∞–≤–Ω–∞—è](../../../../../README.md) | [‚Üê Scenarios](../README.md)

## –û–ø–∏—Å–∞–Ω–∏–µ

–°—Ü–µ–Ω–∞—Ä–∏–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –º–æ—Ä—Ñ–∏–∑–º–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–æ–π —Å–µ–º–∞–Ω—Ç–∏–∫–µ. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ 4.13 –∏–∑ –∫–Ω–∏–≥–∏.

## –£—Ä–æ–≤–Ω–∏ —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

### –£—Ä–æ–≤–µ–Ω—å L1: –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–∞–∫ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ç—å

–í–µ—Ä—à–∏–Ω—ã –∏ —Å—Ç—Ä–µ–ª–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ —Ñ–∞–∫—Ç—ã `edge(label, from, to)`.

### –£—Ä–æ–≤–µ–Ω—å L2: –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–π

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏–π –≤–∏–¥–∞:
- `below ‚àò sun_before = sunset`
- `above ‚àò sun_after = sunrise`
- `g‚Åª ‚àò h = h‚Åª`
- `g‚Å∫ ‚àò h = h‚Å∫`

### –£—Ä–æ–≤–µ–Ω—å L3: –ü—Ä–æ—Ü–µ—Å—Å –∫–∞–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ

–ò–∑ –±–∞–∑–æ–≤—ã—Ö —Å—Ç—Ä–µ–ª–æ–∫ `before`/`after` –∏ `sun` –≤—ã–≤–æ–¥—è—Ç—Å—è "–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ" —Å—Ç—Ä–µ–ª–∫–∏:
- `sun_before: B‚Ä≤ ‚Üí T`
- `sun_after: B ‚Üí T`

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ –ø–æ 2-—à–∞–≥–æ–≤—ã–º –ø—É—Ç—è–º.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

- `model.py` ‚Äî –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å (—Ç–æ–ª—å–∫–æ edges)
- `derive.py` ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º –≤—ã–≤–æ–¥–∞ (D1: –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Å—Ç—Ä–µ–ª–∫–∏, D2: –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏)
- `constraints.py` ‚Äî —É—Å–ª–æ–≤–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- `goal.py` ‚Äî —Ü–µ–ª–µ–≤—ã–µ —Ñ–æ—Ä–º—É–ª—ã
- `explain.py` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
- `params.py` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
- `runner.py` ‚Äî –∑–∞–ø—É—Å–∫ —Å—Ü–µ–Ω–∞—Ä–∏—è

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### –†–µ–∂–∏–º "sun"

–ú–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Å–æ–ª–Ω–µ—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:
- –£–∑–ª—ã: B‚Ä≤ (–ø—Ä–æ—à–ª–æ–µ), A ({now1}), B (–±—É–¥—É—â–µ–µ), T, T‚àí, T+, horizon
- –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–µ–ª–∫–∏: `before`, `after`, `sun`, `below`, `above`
- –í—ã–≤–æ–¥–∏–º—ã–µ: `sun_before`, `sun_after`, `sun1_before`, `sun1_after`
- –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏: `sunset`, `sunrise`, `sunset_h`, `sunrise_h`

### –†–µ–∂–∏–º "prereq"

–û–±–æ–±—â–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ prerequisite/effect:
- –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–µ–ª–∫–∏: `prerequisite`, `effect`, `h`, `g_minus`, `g_plus`
- –í—ã–≤–æ–¥–∏–º—ã–µ: `h_before`, `h_after`
- –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏: `h_minus`, `h_plus`

## –ú–µ—Ö–∞–Ω–∏–∑–º –≤—ã–≤–æ–¥–∞

### –®–∞–≥ D1: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Å—Ç—Ä–µ–ª–∫–∏

–ï—Å–ª–∏ –µ—Å—Ç—å `edge("before", B‚Ä≤, A)` –∏ `edge("sun", A, T)`, —Ç–æ –≤—ã–≤–æ–¥–∏–º `derived_edge("sun_before", B‚Ä≤, T)`.

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è `after` ‚Üí `sun_after`.

### –®–∞–≥ D2: –ö–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞

–ï—Å–ª–∏ –µ—Å—Ç—å –ø—É—Ç—å X -left‚Üí Y -right‚Üí Z –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä–µ–ª–∫–∞ X -result‚Üí Z, —Ç–æ –≤—ã–≤–æ–¥–∏–º `comp(left, right, result)`.

–¢–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç—Ä–∞—Å—Å–∞: `comp_expl(left, right, result, mid)`.

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
from ctmsn.scenarios.time_process.runner import run

out = run(mode="sun")
print("Derivation stats:", out["derivation"])
print("forces(phi):", out["forces"].value)
for line in out["explain"]:
    print("  -", line)
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

–°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ –±—É–¥—É—â–µ–º—É —Ñ–æ—Ä—Å–∏–Ω–≥—É:
- –ú–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –Ω–µ–ø–æ–ª–Ω—É—é –º–æ–¥–µ–ª—å (–±–µ–∑ `sunset` –∏–ª–∏ `sunrise`)
- –§–æ—Ä—Å–∏–Ω–≥-–¥–≤–∏–∂–æ–∫ —Å–º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å, –∫–∞–∫—É—é —Å—Ç—Ä–µ–ª–∫—É –¥–æ–±–∞–≤–∏—Ç—å
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `params.py`

> **–°–º. —Ç–∞–∫–∂–µ:**
> - [USAGE.md](../../../../../USAGE.md) ‚Äî –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
> - [FORCING_IMPLEMENTATION.md](../../../../../FORCING_IMPLEMENTATION.md) ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ä—Å–∏–Ω–≥–∞
