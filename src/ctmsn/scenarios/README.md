# –°—Ü–µ–Ω–∞—Ä–∏–∏ CTMSN

> **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** [üè† –ì–ª–∞–≤–Ω–∞—è](../../../README.md) | [‚Üê Fast Smith](../../../FAST_SMITH_IMPLEMENTATION.md) | **–í—ã –∑–¥–µ—Å—å: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** | [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Üí](../../../DOCUMENTATION_SUMMARY.md)

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Å—Ü–µ–Ω–∞—Ä–∏—è)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ü–µ–Ω–∞—Ä–∏—è](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å—Ü–µ–Ω–∞—Ä–∏—è)
- [–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è](#—Å–æ–∑–¥–∞–Ω–∏–µ-–Ω–æ–≤–æ–≥–æ-—Å—Ü–µ–Ω–∞—Ä–∏—è)
- [–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#–¥–æ—Å—Ç—É–ø–Ω—ã–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)
- [–¢–∏–ø–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](#—Ç–∏–ø–∏—á–Ω—ã–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –∑–∞–¥–∞—á–∏, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ CTMSN.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è

–ö–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```
scenarios/
‚îî‚îÄ‚îÄ –∏–º—è_—Å—Ü–µ–Ω–∞—Ä–∏—è/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ model.py          # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Ç–∏
    ‚îú‚îÄ‚îÄ params.py         # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    ‚îú‚îÄ‚îÄ constraints.py    # –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ goal.py          # –¶–µ–ª–µ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ (œÜ)
    ‚îú‚îÄ‚îÄ runner.py        # –ó–∞–ø—É—Å–∫ —Ñ–æ—Ä—Å–∏–Ω–≥–∞
    ‚îî‚îÄ‚îÄ README.md        # –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ü–µ–Ω–∞—Ä–∏—è

### model.py

–§—É–Ω–∫—Ü–∏—è `build_network()` —Å–æ–∑–¥–∞—ë—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é —Å–µ—Ç—å:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ç—ã (`Concept`)
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ–¥–∏–∫–∞—Ç—ã (`Predicate`)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç—ã (`assert_fact`)

```python
def build_network() -> SemanticNetwork:
    net = SemanticNetwork()
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤ –∏ –ø—Ä–µ–¥–∏–∫–∞—Ç–æ–≤
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∞–∫—Ç–æ–≤
    net.validate()
    return net
```

### params.py

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- –°–æ–∑–¥–∞—ë—Ç –¥–æ–º–µ–Ω—ã (`EnumDomain`, `PredicateDomain`)
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`Variable`)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (`Context`)

```python
@dataclass(frozen=True)
class ScenarioVars:
    x: Variable
    # ... –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

def build_variables(net: SemanticNetwork) -> tuple[ScenarioVars, Context]:
    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    # –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    return vars, ctx0
```

### constraints.py

–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —É—Å–ª–æ–≤–∏—è –Ω–µ–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–æ—Ä–º—É–ª—ã (`FactAtom`, `Not`, `And`, `Or`, `Implies`)

```python
def build_conditions(net: SemanticNetwork) -> Conditions:
    c1 = FactAtom("–ø—Ä–µ–¥–∏–∫–∞—Ç", (–∞—Ä–≥—É–º–µ–Ω—Ç—ã))
    c2 = Not(FactAtom("–¥—Ä—É–≥–æ–π_–ø—Ä–µ–¥–∏–∫–∞—Ç", (–∞—Ä–≥—É–º–µ–Ω—Ç—ã)))
    return Conditions().add(c1, c2, ...)
```

### goal.py

–¶–µ–ª–µ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å:

```python
def build_goal(net: SemanticNetwork):
    phi = And((
        FactAtom("–ø—Ä–µ–¥–∏–∫–∞—Ç1", (–∞—Ä–≥—É–º–µ–Ω—Ç—ã)),
        FactAtom("–ø—Ä–µ–¥–∏–∫–∞—Ç2", (–∞—Ä–≥—É–º–µ–Ω—Ç—ã)),
    ))
    return phi
```

### runner.py

–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Ñ–æ—Ä—Å–∏–Ω–≥–∞:

```python
def run():
    net = build_network()
    vars_, ctx0 = build_variables(net)
    conds = build_conditions(net)
    phi = build_goal(net)
    
    engine = ForcingEngine(net)
    
    chk = engine.check(ctx0, conds)
    forces = engine.forces(ctx0, phi, conds)
    res = engine.force(ctx0, phi, conds)
    
    return {
        "check": chk,
        "forces": forces,
        "result": res,
        "ctx0": ctx0.as_dict(),
    }
```

### README.md

–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:
- –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏
- –§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É

## –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `scenarios/–∏–º—è_—Å—Ü–µ–Ω–∞—Ä–∏—è/`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
4. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–º–µ—Ä –≤ `examples/–∏–º—è_—Å—Ü–µ–Ω–∞—Ä–∏—è_demo.py`
5. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –≤ `tests/test_–∏–º—è_—Å—Ü–µ–Ω–∞—Ä–∏—è.py`
6. –û–±–Ω–æ–≤–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π README.md

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### fast_smith

–ó–∞–¥–∞—á–∞ –æ –±—ã—Å—Ç—Ä–æ–º –°–º–∏—Ç–µ - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ –æ –¥–∏–Ω–∞–º–∏–∫–µ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏.

**–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:**
- –†–∞–±–æ—Ç—É —Å –∫–æ–º–ø–æ–∑–∏—Ü–∏—è–º–∏ –º–æ—Ä—Ñ–∏–∑–º–æ–≤
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—É—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é
- –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–∏–∫–∞—Ç—ã
- –ü—Ä–æ–≤–µ—Ä–∫—É –Ω–µ–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–æ—Å—Ç–∏

**–ó–∞–ø—É—Å–∫:**
```bash
python src/ctmsn/examples/fast_smith_demo.py
```

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** [fast_smith/README.md](fast_smith/README.md)

## –¢–∏–ø–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### –ö–æ–º–ø–æ–∑–∏—Ü–∏–∏ –º–æ—Ä—Ñ–∏–∑–º–æ–≤

```python
# –§–∞–∫—Ç: g ‚àò f = h
net.assert_fact("comp", ("f", "g", "h"))

# –£—Å–ª–æ–≤–∏–µ
FactAtom("comp", ("f", "g", "h"))
```

### –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤—É

```python
# –§–∞–∫—Ç: x ‚àà A
net.assert_fact("in", (x, A))

# –£—Å–ª–æ–≤–∏–µ: x ‚àâ B
Not(FactAtom("in", (x, B)))
```

### –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–∏–∫–∞—Ç—ã

```python
# –§–∞–∫—Ç: –æ–±—ä–µ–∫—Ç –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ label
net.assert_fact("acts_like", (obj, "label"))

# –¶–µ–ª—å
FactAtom("acts_like", (obj, "label"))
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å**: –í—Å–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º–∏
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –≤–µ–∑–¥–µ
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –í—ã–∑—ã–≤–∞–π—Ç–µ `net.validate()` –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ—Ç–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å—ã–≤–∞–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏–∫—É –ø—Ä–µ–¥–∏–∫–∞—Ç–æ–≤
5. **–¢–µ—Å—Ç—ã**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Ç–∏, —É—Å–ª–æ–≤–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–æ—Ä—Å–∏–Ω–≥–∞

---

> **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** [üè† –ì–ª–∞–≤–Ω–∞—è](../../../README.md) | [‚Üê Fast Smith](../../../FAST_SMITH_IMPLEMENTATION.md) | [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Üí](../../../DOCUMENTATION_SUMMARY.md)
> 
> **–°–º. —Ç–∞–∫–∂–µ:**
> - [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ–æ—Ä—Å–∏–Ω–≥–∞](../../../FORCING_IMPLEMENTATION.md)
> - [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](../../../USAGE.md)
